<!DOCTYPE html>

<html lang="{{ app.request.locale }}" class="claroline-app {{ config.getParameter('theme') }}">
    <head>
        <meta charset="utf-8" />

        {#
           The following line is needed for unit testing as the DOMDocument
           used by the SF's crawler doesn't recognize the HTML5 charset meta tag.
           https://github.com/symfony/symfony/issues/3881
        #}
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        {# This is required to make css responsive work properly #}
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>
            {% if config.getParameter('name') is not empty %}
                {{ config.getParameter('name') }}
            {% else %}
                Claroline Connect
            {% endif %}
        </title>

        {% set description = getContent('platformDescription') %}
        {% if not description is empty %}
            <meta name="description" content="{{ description.content | striptags }}" />
        {% endif %}

        {% if config.getParameter('google_meta_tag') is not empty %}
            {{ config.getParameter('google_meta_tag') | raw }}
        {% endif %}

        {% block favicon %}
            <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
            <link rel="apple-touch-icon" href="{{ asset('apple-touch-icon.png')}}" />
        {% endblock %}

        {# Adds stylesheets #}
        {% include 'ClarolineAppBundle:layout:stylesheets.html.twig' %}
    </head>

    <body>
        {# Anchor for react app to mount in #}
        <div
            class="app-container"
            role="presentation"

            data-maintenance="{{ maintenance ? 'true' : 'false' }}"
            data-impersonated="{{ impersonated ? 'true' : 'false' }}"
            data-current-user="{{ app.user | api_serialize | json_encode | raw | escape }}"
            data-header="{{ header | json_encode | raw | escape }}"
        ></div>

        {# Anchor for UI portals (eg. modals, walkthroughs) #}
        <div class="app-overlays-container"></div>

        {# Dumps some server vars in the DOM to make it available in JS #}
        {% include "ClarolineAppBundle:layout:variables.html.twig" %}

        {# Adds javascripts #}
        {% include 'ClarolineAppBundle:layout:javascripts.html.twig' %}
    </body>
</html>
