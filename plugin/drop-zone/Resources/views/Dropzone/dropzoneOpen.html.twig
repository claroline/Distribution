{% extends "ClarolineCoreBundle:Resource:layout.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ themeAsset('claroline-distribution-plugin-drop-zone-resource.css') }}" />
{% endblock %}

{% block content %}
    <div
        class="page-container dropzone-container"
        data-user="
            {% if user is not empty %}
                {{ user | api_serialize({'public': true}) | json_encode | raw | escape }}
            {% else %}
                {{ null | json_encode }}
            {% endif %}
        "
        data-resource-node="{{ _resource.resourceNode | api_serialize | json_encode | raw | escape }}"
        data-dropzone="{{ _resource | api_serialize | json_encode | raw | escape }}"
        data-my-drop="
            {% if myDrop is not empty %}
                {{ myDrop | api_serialize | json_encode | raw | escape }}
            {% else %}
                {{ null | json_encode }}
            {% endif %}
        "
        data-peer-drop="
            {% if peerDrop is not empty %}
                {{ peerDrop | api_serialize | json_encode | raw | escape }}
            {% else %}
                {{ null | json_encode }}
            {% endif %}
        "
        data-nb-corrections="{{ nbCorrections | json_encode | raw | escape }}"
        data-tools="{{ tools | json_encode | raw | escape }}"
        data-user-evaluation="
            {% if userEvaluation is not empty %}
                {{ userEvaluation | api_serialize | json_encode | raw | escape }}
            {% else %}
                {{ null | json_encode }}
            {% endif %}
        "
        data-teams="
            {% if teams|length > 0 %}
                {{ teams | json_encode | raw | escape }}
            {% else %}
                {{ null | json_encode }}
            {% endif %}
        "
        data-error-message="{{ errorMessage | json_encode | raw | escape }}"
    >
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ hotAsset('dist/claroline-distribution-plugin-drop-zone-dropzone-resource.js') }}"></script>
{% endblock %}
