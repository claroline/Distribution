services:
    _defaults:
        autowire: false
        autoconfigure: false
        public: true
        tags: ['claroline.crud']

    Claroline\CursusBundle\Listener\CursusListener:
        arguments:
            - '@security.authorization_checker'
            - '@Claroline\CursusBundle\Manager\CourseManager'
            - '@Claroline\CoreBundle\API\Serializer\ParametersSerializer'
            - '@claroline.manager.tool_manager'
            - '@translator'
        tags:
            - { name: kernel.event_listener, event: administration_tool_claroline_cursus_tool, method: onAdministrationToolOpen }
            - { name: kernel.event_listener, event: open_tool_workspace_claroline_session_events_tool, method: onDisplayWorkspaceSessionEventTool }
            - { name: kernel.event_listener, event: claroline_external_agenda_events, method: onAgendaEventsRequest }
            - { name: kernel.event_listener, event: open_tool_desktop_cursus, method: onDisplayDesktopCursusTool }

    Claroline\CursusBundle\Listener\DataSource\PublicSessionSource:
        arguments:
            - '@Claroline\AppBundle\API\FinderProvider'
        tags:
            - { name: kernel.event_listener, event: data_source.public_course_sessions.load, method: getData }

    Claroline\CursusBundle\Listener\DataSource\MySessionSource:
        arguments:
            - '@Claroline\AppBundle\API\FinderProvider'
            - '@security.token_storage'
        tags:
            - { name: kernel.event_listener, event: data_source.my_course_sessions.load, method: getData }
