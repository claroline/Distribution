services:
    _defaults:
        autowire: false
        autoconfigure: false
        public: true

    Icap\LessonBundle\Listener\Resource\LessonListener:
        arguments:
           - '@templating'
           - '@claroline.persistence.object_manager'
           - '@claroline.config.platform_config_handler'
           - '@claroline.api.serializer'
           - '@Icap\LessonBundle\Manager\ChapterManager'
        tags:
            - { name: kernel.event_listener, event: resource.icap_lesson.load, method: onLoad }
            - { name: kernel.event_listener, event: resource.icap_lesson.copy, method: onCopy }
            - { name: kernel.event_listener, event: transfer.icap_lesson.export, method: onExport }
            - { name: kernel.event_listener, event: transfer.icap_lesson.import.after, method: onImport }
            - { name: kernel.event_listener, event: resource.icap_lesson.delete, method: onDelete }

    icap.listener.lesson_log_listener:
        class: Icap\LessonBundle\Listener\LogListener
        calls:
            - [setContainer, ["@service_container"]]
        tags:
            - { name: kernel.event_listener, event: create_log_list_item_resource-icap_lesson-chapter_create,    method: onCreateLogListItem }
            - { name: kernel.event_listener, event: create_log_list_item_resource-icap_lesson-chapter_read,      method: onCreateLogListItem }
            - { name: kernel.event_listener, event: create_log_list_item_resource-icap_lesson-chapter_update,    method: onCreateLogListItem }
            - { name: kernel.event_listener, event: create_log_list_item_resource-icap_lesson-chapter_delete,    method: onCreateLogListItem }
            - { name: kernel.event_listener, event: create_log_list_item_resource-icap_lesson-chapter_move,      method: onCreateLogListItem }
            - { name: kernel.event_listener, event: create_log_details_resource-icap_lesson-chapter_create,      method: onChapterCreateLogDetails }
            - { name: kernel.event_listener, event: create_log_details_resource-icap_lesson-chapter_read,        method: onChapterCreateLogDetails }
            - { name: kernel.event_listener, event: create_log_details_resource-icap_lesson-chapter_update,      method: onChapterCreateLogDetails }
            - { name: kernel.event_listener, event: create_log_details_resource-icap_lesson-chapter_delete,      method: onChapterCreateLogDetails }
            - { name: kernel.event_listener, event: create_log_details_resource-icap_lesson-chapter_move,        method: onChapterCreateLogDetails }
