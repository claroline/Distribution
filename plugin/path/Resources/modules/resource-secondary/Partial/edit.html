<div class="resources-secondary panel panel-default">
    <div class="panel-heading">
        <h2 class="panel-title">En compl√©ment...</h2>
    </div>

    <ul class="list-group">
        <!-- Inherited resources -->
        <li class="resource-container list-group-item" role="presentation" data-ng-repeat="resource in resourcesSecondaryEditCtrl.inherited">
            <div class="resource lvl lvl-{{ resource.parentStep.lvl }} lvl-border">
                <!-- Resource icon -->
                <img class="resource-icon"
                     alt="{{ resource.mimeType }}"
                     data-ng-if="0 !== resourcesSecondaryEditCtrl.resourceIcons.length"
                     data-ng-src="{{ (resourcesSecondaryEditCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryEditCtrl.resourceIcons['custom/default'])|asset }}" />

                <!-- Resource name -->
                {{ resource.name }}
            </div>

            <div class="embedded-resource-actions">
                <!-- Show resource -->
                <a class="btn btn-link-default"
                   href="{{ resource.url || ('claro_resource_open'|path:{node: resource.resourceId, resourceType: resource.type}) }}"
                   data-toggle="tooltip"
                   data-placement="left"
                   data-title="{{ 'resource_show'|trans:{}:'path_wizards' }}"
                >
                    <span class="fa fa-fw fa-sign-out"></span>
                    <span class="sr-only">{{ 'resource_show'|trans:{}:'path_wizards' }}</span>
                </a>

                <!-- Toggle visibility of the resource for the current step -->
                <button type="button"
                        class="btn btn-link-default"
                        data-ng-click="resourcesSecondaryEditCtrl.toggleExcluded(resource)"
                        data-toggle="tooltip"
                        data-placement="left"
                        data-title="{{( resource.isExcluded ? 'resource_show_parent' : 'resource_hide_parent')|trans:{}:'path_wizards' }}"
                >
                    <span class="fa fa-fw fa-eye"
                          data-ng-class="{
                            'fa-eye': resource.isExcluded,
                            'fa-eye-slash': !resource.isExcluded
                          }"
                    ></span>
                    <span class="sr-only">
                        {{( resource.isExcluded ? 'resource_show_parent' : 'resource_hide_parent')|trans:{}:'path_wizards' }}
                    </span>
                </button>
            </div>
        </li>

        <!-- Owned resources -->
        <li class="resource-container list-group-item" role="presentation" data-ng-repeat="resource in resourcesSecondaryEditCtrl.resources">
            <div class="resource">
                <!-- Resource icon -->
                <img class="resource-icon"
                     alt="{{ resource.mimeType }}"
                     data-ng-if="0 !== resourcesSecondaryEditCtrl.resourceIcons.length"
                     data-ng-src="{{ (resourcesSecondaryEditCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryEditCtrl.resourceIcons['custom/default'])|asset }}" />

                <!-- Resource name -->
                {{ resource.name }}
            </div>

            <div class="embedded-resource-actions">
                <!-- Show resource -->
                <a class="btn btn-link-default"
                   href="{{ resource.url || ('claro_resource_open'|path:{node: resource.resourceId, resourceType: resource.type}) }}"
                   data-toggle="tooltip"
                   data-placement="left"
                   data-title="{{ 'resource_show'|trans:{}:'path_wizards' }}"
                >
                    <span class="fa fa-fw fa-sign-out"></span>
                    <span class="sr-only">{{ 'resource_show'|trans:{}:'path_wizards' }}</span>
                </a>

                <!-- Toggle visibility of the resource for the children -->
                <button type="button"
                        class="btn btn-link-default"
                        data-ng-click="resourcesSecondaryEditCtrl.togglePropagation(resource)"
                        data-toggle="tooltip"
                        data-placement="left"
                        data-title="{{ (!resource.propagateToChildren ? 'resource_propagate' : 'resource_no_propagate')|trans:{}:'path_wizards' }}"
                >
                    <span class="fa fa-fw"
                          data-ng-class="{
                            'fa-eye': !resource.propagateToChildren,
                            'fa-eye-slash': resource.propagateToChildren
                          }"
                    ></span>
                    <span class="sr-only">
                        {{ (!resource.propagateToChildren ? 'resource_propagate' : 'resource_no_propagate')|trans:{}:'path_wizards' }}
                    </span>
                </button>

                <button type="button"
                        class="btn btn-link-default"
                        data-ng-click="resourcesSecondaryEditCtrl.removeResource(resource)"
                        data-toggle="tooltip"
                        data-placement="left"
                        data-title="{{ 'resource_delete'|trans:{}:'path_wizards' }}"
                >
                    <span class="fa fa-fw fa-trash-o"></span>
                    <span class="sr-only">{{ 'resource_delete'|trans:{}:'path_wizards' }}</span>
                </button>
            </div>
        </li>
    </ul>

    <div class="panel-body text-center">
        <btn-resource-picker class="btn btn-default" data-parameters="resourcesSecondaryEditCtrl.resourcePicker">
            <span class="fa fa-fw fa-plus"></span>
            {{ 'resource_secondary_add'|trans:{}:'path_wizards' }}
        </btn-resource-picker>
    </div>
</div>

