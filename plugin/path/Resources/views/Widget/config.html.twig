{% form_theme form 'ClarolineCoreBundle::form_theme.html.twig' %}

{% import 'ClarolineCoreBundle::macros.html.twig' as macros %}

<form role="form"
      id="form_log_update_desktop_widget"
      method="POST"
      action="{{ path('innova_path_widget_config', { 'widgetInstance': instance.getId() }) }}"
      class="form-horizontal widget-content-config-form"
      {{ form_enctype(form) }}
>
    <div class="panel-body">
        {{ form_widget(form) }}

        <div class="tagList">
            {% if form.vars.value is not null and form.vars.value.tags is not empty %}
                {% for resourceTag in form.vars.value.tags %}
                <span class="label label-success margin-bottom-sm margin-right-sm">
                    <i class="fa fa-tag"></i>
                    {{ resourceTag.getName() }}

                    <a role=button class="removeTag" href="" data-tag-id="{{ resourceTag.getId() }}"><span class="fa fa-times"></span></a>
                </span>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    {{ macros.flashBox() }}
</form>

{% block javascripts %}
    <style>
        .removeTag,
        .removeTag:hover,
        .removeTag:focus {
            color: #fff;
        }
    </style>

    <script type="text/javascript">
        window.allTags = [{% for tag in tags %}'{{ tag.getName() }}'{% if not loop.last %}, {% endif %}{% endfor %}];
        window.formName = "{{ form.vars.name }}"
    </script>
    <script> load({{ chunks('claroline-distribution-plugin-path-config')|raw }}) </script>
{% endblock %}
