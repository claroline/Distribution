{% set layout = 'ClarolineCoreBundle:Workspace:layout.html.twig' %}

{% if isDesktop() %}
    {% set layout = 'ClarolineCoreBundle:Desktop:layout.html.twig' %}
{% endif %}

{% extends layout %}

{% block title %}{{ _resource.getResourceNode().getName()|striptags|raw }}{% endblock %}

{% block section_content %}
    <div class="panel-heading">{{ _resource.getResourceNode().getName() }}</div>
    <div data-results id="result-module"></div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ url('bazinga_jstranslation_js', { 'domain': 'results' }) }}"></script>
    <script>
        window.resultId = {{ _resource.getId() }}
        window.resultMax = {{ _resource.getTotal() }}
        window.resultMarks = {{ marks|json_encode|raw }}
        window.workspaceUsers = {{ users|json_encode|raw }}
        window.isReadOnly = {{ canEdit ? 'false' : 'true' }}
    </script>
    <script>
        load({{ chunks('claroline-distribution-plugin-result-list')|raw }}, function() {
            angular.bootstrap('#result-module', ['ResultModule']);
        })
    </script>
{% endblock %}
