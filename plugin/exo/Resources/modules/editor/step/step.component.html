<div class="panel panel-default step">
  <div class="panel-heading">
    <div class="row">
      <h3 class="col-md-10 panel-title">
        <span class="handle">
          <span class="fa fa-lg fa-ellipsis-v"></span>
        </span>
        <span>
          {{ 'step'|trans:{}:'ujm_exo' }} <b>#{{ $ctrl.index }}</b>
          <small>({{ 'step_items_count'|transChoice:$ctrl.items.length:{ count: $ctrl.items.length }:'ujm_exo' }})</small>
        </span>
      </h3>
      <div class="col-md-2 step-actions text-right">
        <div style="display: inline-block" role="presentation" class="dropdown">
          <button class="btn btn-sm btn-default dropdown-toggle"
                  data-toggle="dropdown"
                  title="{{ 'add_question'|trans:{}:'ujm_exo' }}"
                  data-uib-dropdown-toggle>
            <span class="fa fa-plus"></span>
            <span class="sr-only">{{ 'add_question'|trans:{}:'ujm_exo' }}</span>
          </button>
          <ul data-uib-dropdown-menu class="dropdown-menu" role="menu">
            <li role="presentation" data-ng-repeat="type in $ctrl.itemTypes">
              <a role="menuitem"
                 href="#"
                 onclick="return false"
                 data-ng-click="$ctrl.dispatch('createItem', $ctrl.id, type)">
                {{ type | trans:{}:'ujm_exo' }}
              </a>
            </li>
          </ul>
        </div>
        <button type="button"
                class="btn btn-sm btn-default"
                data-ng-click="$ctrl.editMetadata(step)"
                data-toggle="tooltip" title="{{ 'edit_step' | trans:{}:'ujm_exo' }}">
          <span class="fa fa-pencil"></span>
          <span class="sr-only">{{ 'edit_step'|trans:{}:'ujm_exo' }}</span>
        </button>
        <button type="button"
                class="btn btn-sm btn-default move-step-handle"
                data-toggle="tooltip"
                title="{{ 'move_step' | trans:{}:'ujm_exo' }}">
          <span class="fa fa-arrows"></span>
          <span class="sr-only">{{ 'move_step'|trans:{}:'ujm_exo' }}</span>
        </button>
        <button class="btn btn-sm btn-danger"
                title="{{ 'delete_step'|trans:{}:'ujm_exo' }}"
                data-toggle="tooltip"
                data-confirm-modal="{{ 'delete_of_my_exercise'|trans:{}:'ujm_exo'}}"
                data-confirm-modal-action="$ctrl.dispatch('deleteStep', $ctrl.id)">
          <span class="fa fa-trash-o"></span>
          <span class="sr-only">{{ 'delete_step'|trans:{}:'ujm_exo' }}</span>
        </button>
      </div>
    </div>
  </div>
  <div class="panel-body items">
    <item data-ng-repeat="item in $ctrl.items"
          data-id="item.id"
          data-step-id="$ctrl.id"
          data-type="item.type"
          data-data="item"
          data-categories="$ctrl.categories">
    </item>
  </div>
</div>
